<!DOCTYPE html>
<html>
<head>
    <title>Weather App</title>
</head>
<body>

    <h1>Weather App</h1>

    <input type="text" id="cityInput" placeholder="Enter city name">
    <button onclick="getWeather()">Get Weather</button>

    <div id="weatherResult"></div>

    <script>
      
      async function getWeather() {
    const city = document.getElementById("cityInput").value;

    if (!city) {
        alert("Please enter a city name");
        return;
    }

    try {
        // 1️⃣ Get latitude & longitude from city name
        const geoResponse = await fetch(
            `https://geocoding-api.open-meteo.com/v1/search?name=${city}`
        );
        const geoData = await geoResponse.json();

        if (!geoData.results) {
            document.getElementById("weatherResult").innerHTML =
                "City not found!";
            return;
        }


        const { latitude, longitude } = geoData.results[0];
        console.log(latitude)

        // 2️⃣ Fetch weather data
        const weatherResponse = await fetch(
            `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&hourly=relativehumidity_2m`
        );
        const weatherData = await weatherResponse.json();
        console.log(weatherData)

        const currenttime = weatherData.current_weather.time;
        const temperature = weatherData.current_weather.temperature;
        const windspeed = weatherData.current_weather.windspeed;
        const weatherCode = weatherData.current_weather.weathercode;

        // 3️⃣ Update DOM dynamically
        document.getElementById("weatherResult").innerHTML = `
            <h2>Current Time ${currenttime}</h2>
            <h2>Weather in ${city}</h2>
            <p>Temperature: ${temperature} °C</p>
            <p>Wind Speed: ${windspeed} km/h</p>
            <p>Weather Code: ${weatherCode}</p>
        `;

    } catch (error) {
        console.error(error);
        document.getElementById("weatherResult").innerHTML =
            "Something went wrong!";
    }
}
    </script>

</body>
</html>